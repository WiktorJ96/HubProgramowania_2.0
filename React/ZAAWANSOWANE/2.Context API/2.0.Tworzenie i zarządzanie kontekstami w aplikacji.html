<!DOCTYPE html>
<html lang="pl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tworzenie i zarządzanie kontekstami w React</title>
    <link rel="stylesheet" href="/React/styles.css">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.23.0/themes/prism-tomorrow.min.css" rel="stylesheet" />
</head>
<body>
    <div class="container">
        <h1>Tworzenie i zarządzanie kontekstami w React</h1>

        <p>React Context API pozwala na efektywne przekazywanie danych pomiędzy komponentami w aplikacji, bez konieczności przekazywania ich przez propsy na każdym poziomie hierarchii komponentów. Kiedy masz dane, które muszą być dostępne dla wielu komponentów w różnych miejscach aplikacji, kontekst jest idealnym rozwiązaniem.</p>

        <h2>Podstawowe tworzenie kontekstu</h2>
        <p>Aby stworzyć kontekst, używamy funkcji <code>React.createContext</code>. Kontekst tworzy dwie główne części: <strong>Provider</strong>, który dostarcza dane do komponentów, oraz <strong>Consumer</strong>, który pozwala na dostęp do tych danych w innych komponentach.</p>

        <pre><code class="language-javascript">
import React, &#123; useState, createContext &#125; from 'react';

// Tworzenie kontekstu
const UserContext = createContext();

function App() &#123;
  const [user, setUser] = useState(&#123; name: 'Anna', loggedIn: true &#125;);

  return (
    &lt;UserContext.Provider value=&#123;user&#125;&gt;  {/* Dostarczanie danych */}
      &lt;Navbar /&gt;
      &lt;MainContent /&gt;
    &lt;/UserContext.Provider&gt;
  );
&#125;

function Navbar() &#123;
  return (
    &lt;nav&gt;
      &lt;h1&gt;Moja aplikacja&lt;/h1&gt;
      &lt;UserProfile /&gt;  {/* Komponent korzystający z kontekstu */}
    &lt;/nav&gt;
  );
&#125;

function UserProfile() &#123;
  return (
    &lt;UserContext.Consumer&gt;
      &#123;(user) => (
        &lt;p&gt;Witaj, &#123;user.name&#125;&lt;/p&gt;
      )&#125;
    &lt;/UserContext.Consumer&gt;
  );
&#125;

ReactDOM.render(&lt;App /&gt;, document.getElementById('root'));
        </code></pre>

        <p>W tym przykładzie utworzyliśmy kontekst <code>UserContext</code>, który przechowuje dane o użytkowniku. Komponent <code>UserContext.Provider</code> dostarcza dane do komponentów potomnych, a <code>UserContext.Consumer</code> pozwala komponentowi <code>UserProfile</code> na dostęp do tych danych.</p>

        <h2>Korzystanie z kontekstu za pomocą hooka <code>useContext</code></h2>
        <p>Zamiast używać <code>Consumer</code>, można skorzystać z hooka <code>useContext</code>, który jest łatwiejszy w użyciu i bardziej czytelny. Oto przykład:</p>

        <pre><code class="language-javascript">
import React, &#123; useState, useContext, createContext &#125; from 'react';

// Tworzenie kontekstu
const UserContext = createContext();

function App() &#123;
  const [user, setUser] = useState(&#123; name: 'Anna', loggedIn: true &#125;);

  return (
    &lt;UserContext.Provider value=&#123;user&#125;&gt;  {/* Dostarczanie danych */}
      &lt;Navbar /&gt;
      &lt;MainContent /&gt;
    &lt;/UserContext.Provider&gt;
  );
&#125;

function Navbar() &#123;
  return (
    &lt;nav&gt;
      &lt;h1&gt;Moja aplikacja&lt;/h1&gt;
      &lt;UserProfile /&gt;  {/* Komponent korzystający z kontekstu */}
    &lt;/nav&gt;
  );
&#125;

function UserProfile() &#123;
  const user = useContext(UserContext);  // Użycie hooka useContext
  return &lt;p&gt;Witaj, &#123;user.name&#125;&lt;/p&gt;;
&#125;

ReactDOM.render(&lt;App /&gt;, document.getElementById('root'));
        </code></pre>

        <p>W tym przykładzie używamy hooka <code>useContext</code>, aby pobrać dane o użytkowniku z kontekstu. Dzięki temu komponent <code>UserProfile</code> ma bezpośredni dostęp do wartości kontekstu, bez konieczności używania komponentu <code>Consumer</code>.</p>

        <h2>Aktualizacja danych w kontekście</h2>
        <p>Kontekst może również przechowywać funkcje, które umożliwiają aktualizację jego danych. Poniżej znajdziesz przykład, w którym kontekst przechowuje funkcję do zmiany stanu użytkownika:</p>

        <pre><code class="language-javascript">
import React, &#123; useState, useContext, createContext &#125; from 'react';

// Tworzenie kontekstu
const UserContext = createContext();

function App() &#123;
  const [user, setUser] = useState(&#123; name: 'Anna', loggedIn: true &#125;);

  const logOut = () => &#123;
    setUser(&#123; name: '', loggedIn: false &#125;);
  &#125;;

  return (
    &lt;UserContext.Provider value=&#123;&#123; user, logOut &#125;&#125;&gt;  {/* Dostarczanie danych i funkcji */}
      &lt;Navbar /&gt;
      &lt;MainContent /&gt;
    &lt;/UserContext.Provider&gt;
  );
&#125;

function Navbar() &#123;
  return (
    &lt;nav&gt;
      &lt;h1&gt;Moja aplikacja&lt;/h1&gt;
      &lt;UserProfile /&gt;
    &lt;/nav&gt;
  );
&#125;

function UserProfile() &#123;
  const &#123; user, logOut &#125; = useContext(UserContext);  // Użycie useContext

  return (
    &lt;div&gt;
      &lt;p&gt;Witaj, &#123;user.name&#125;&lt;/p&gt;
      &lt;button onClick=&#123;logOut&#125;&gt;Wyloguj&lt;/button&gt;
    &lt;/div&gt;
  );
&#125;

ReactDOM.render(&lt;App /&gt;, document.getElementById('root'));
        </code></pre>

        <p>W tym przykładzie kontekst <code>UserContext</code> przechowuje nie tylko dane o użytkowniku, ale również funkcję <code>logOut</code>, która pozwala na wylogowanie użytkownika. Komponent <code>UserProfile</code> może używać tej funkcji, aby aktualizować stan kontekstu.</p>

        <h2>Zagnieżdżanie kontekstów</h2>
        <p>W aplikacjach React można używać wielu kontekstów jednocześnie. Konteksty mogą być zagnieżdżane, co pozwala na przekazywanie różnych zestawów danych do różnych części aplikacji. Oto przykład z dwoma kontekstami:</p>

        <pre><code class="language-javascript">
import React, &#123; useState, useContext, createContext &#125; from 'react';

// Tworzenie dwóch kontekstów
const UserContext = createContext();
const ThemeContext = createContext();

function App() &#123;
  const [user, setUser] = useState(&#123; name: 'Anna', loggedIn: true &#125;);
  const [theme, setTheme] = useState('dark');

  return (
    &lt;UserContext.Provider value=&#123;user&#125;&gt;  {/* Dostarczanie danych o użytkowniku */}
      &lt;ThemeContext.Provider value=&#123;theme&#125;&gt;  {/* Dostarczanie motywu */}
        &lt;Navbar /&gt;
        &lt;MainContent /&gt;
      &lt;/ThemeContext.Provider&gt;
    &lt;/UserContext.Provider&gt;
  );
&#125;

function Navbar() &#123;
  return (
    &lt;nav&gt;
      &lt;h1&gt;Moja aplikacja&lt;/h1&gt;
      &lt;UserProfile /&gt;
    &lt;/nav&gt;
  );
&#125;

function UserProfile() &#123;
  const user = useContext(UserContext);  // Użycie kontekstu User
  const theme = useContext(ThemeContext);  // Użycie kontekstu Theme

  return (
    &lt;div style=&#123;&#123; color: theme === 'dark' ? 'white' : 'black' &#125;&#125;&gt;
      &lt;p&gt;Witaj, &#123;user.name&#125;&lt;/p&gt;
    &lt;/div&gt;
  );
&#125;

ReactDOM.render(&lt;App /&gt;, document.getElementById('root'));
        </code></pre>

        <p>W tym przykładzie mamy dwa konteksty: <code>UserContext</code> i <code>ThemeContext</code>. Komponent <code>UserProfile</code> korzysta z obu tych kontekstów, aby wyświetlać dane o użytkowniku oraz stosować odpowiedni styl na podstawie motywu (ciemny lub jasny).</p>

        <h2>Kiedy używać Context API?</h2>
        <ul>
            <li><strong>Globalne dane:</strong> Kiedy masz dane, które muszą być dostępne dla wielu komponentów w aplikacji, takie jak motyw, dane użytkownika czy ustawienia językowe.</li>
            <li><strong>Wielopoziomowe przekazywanie danych:</strong> Kiedy przekazywanie propsów na każdym poziomie komponentów staje się zbyt skomplikowane i trudne do zarządzania.</li>
        </ul>

        <h2>Podsumowanie</h2>
        <p>React Context API pozwala na łatwe zarządzanie globalnymi danymi w aplikacji. Umożliwia to efektywne przekazywanie danych do komponentów bez potrzeby ręcznego przekazywania propsów. Context API staje się szczególnie przydatny w złożonych aplikacjach, gdzie wiele komponentów wymaga dostępu do tych samych danych.</p>
    </div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.23.0/prism.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.23.0/components/prism-javascript.min.js"></script>
    <script src="https://unpkg.com/react@17/umd/react.development.js"></script>
    <script src="https://unpkg.com/react-dom@17/umd/react-dom.development.js"></script>
</body>
</html>
