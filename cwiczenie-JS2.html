<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Quiz</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous">
  </head>
  <body>
    <h1>Sprawdź się</h1>
    <hr>
    <div id="question" class="mb-3"></div>
    <div id="answer" class="mb-3"></div>
    <button id="next" class="btn btn-primary" onclick="newQ.nextQuestion()">Następne pytanie</button>
    <div id="result" class="mt-3"></div>

    <script>
        const questionsData = [
            ["Co to jest funkcja map() w JavaScript?", 
 ["Służy do filtrowania danych", "Służy do przypisania funkcji do każdego elementu tablicy", "Służy do sortowania danych"],
 1],    
            ["Co oznacza element <div> w HTML?", 
 ["Element blokowy bez znaczenia semantycznego", "Element liniowy", "Element do osadzania multimediów"],
 0],
            ["Do czego służy Docker Compose?", 
 ["Do tworzenia obrazów Docker", "Do zarządzania wieloma kontenerami", "Do instalowania Dockera"],
 1],
            ["Które polecenie Git służy do przesłania zmian na zdalne repozytorium?", 
 ["git commit", "git push", "git pull"],
 1],
        ];

        class Question {
            #title;
            #answers;
            #correctAnswer;

            constructor(title, answers, correctAnswer) {
                this.#title = title;
                this.#answers = answers;
                this.#correctAnswer = correctAnswer;
            }

            get title() {
                return this.#title;
            }

            get answers() {
                return this.#answers;
            }

            get correctAnswer() {
                return this.#correctAnswer;
            }
        }

        class Quiz {
            #questions;
            #currentQuestionIndex;
            #score;

            constructor(questions) {
                this.#questions = questions.map(question => new Question(question[0], question[1], question[2]));
                this.#currentQuestionIndex = 0;
                this.#score = 0;
            }

            displayQuestion() {
                if (this.#currentQuestionIndex < this.#questions.length) {
                    const questionElement = document.getElementById('question');
                    const answerElement = document.getElementById('answer');

                    // Ustawienie pytania
                    questionElement.textContent = this.#questions[this.#currentQuestionIndex].title;

                    // Wyczyszczenie poprzednich odpowiedzi
                    answerElement.innerHTML = '';

                    // Wyświetlenie odpowiedzi
                    this.#questions[this.#currentQuestionIndex].answers.forEach((answer, index) => {
                        const ansEl = document.createElement('div');
                        ansEl.innerHTML = `<label><input type="radio" value="${index}" name="answer"> ${answer}</label>`;
                        answerElement.appendChild(ansEl);
                    });
                } else {
                    this.showResult();
                }
            }

            nextQuestion() {
                const selectedAnswer = document.querySelector('input[name="answer"]:checked');

                if (selectedAnswer) {
                    const answer = parseInt(selectedAnswer.value);

                    // Sprawdzenie, czy odpowiedź jest poprawna
                    if (answer === this.#questions[this.#currentQuestionIndex].correctAnswer) {
                        this.#score++;
                    }

                    // Przejście do następnego pytania
                    this.#currentQuestionIndex++;
                    this.displayQuestion();
                } else {
                    alert('Wybierz odpowiedź przed przejściem dalej.');
                }
            }

            showResult() {
                const resultElement = document.getElementById('result');
                resultElement.textContent = `Twój wynik: ${this.#score} z ${this.#questions.length}`;
            }
        }

        let newQ = new Quiz(questionsData);
        newQ.displayQuestion();
    </script>

    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.6/dist/umd/popper.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.min.js"></script>
  </body>
</html>
