<!DOCTYPE html>
<html lang="pl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="../styles.css"> 
    <link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.23.0/themes/prism-tomorrow.min.css" rel="stylesheet" />
    <title>Logger - Wzorzec Singleton</title>
</head>
<body>
    <div class="container">
        <h1>Logger - Wzorzec Singleton</h1>
        <button id="logBtn">Dodaj log</button>
        <div id="log-container"></div>

        <h2>Kod HTML i JavaScript:</h2>
        <pre><code class="language-html">
        &lt;h1&gt;Logger - Wzorzec Singleton&lt;/h1&gt;
        &lt;button id="logBtn"&gt;Dodaj log&lt;/button&gt;
        &lt;div id="log-container"&gt;&lt;/div&gt;

        &lt;script&gt;
// Klasa Logger implementująca wzorzec Singleton
class Logger {
    constructor() {
        // Sprawdzenie, czy instancja Loggera już istnieje
        if (Logger.instance) {
            return Logger.instance;  // Jeśli istnieje, zwraca istniejącą instancję
        }

        this.logs = [];  // Tablica przechowująca logi
        Logger.instance = this;  // Przypisanie instancji do statycznej właściwości
    }

    // Metoda do dodawania nowego loga
    addLog(message) {
        const timestamp = new Date().toLocaleTimeString();  // Pobieranie aktualnego czasu
        this.logs.push(`[${timestamp}] ${message}`);  // Dodanie nowego loga z czasem
        this.displayLogs();  // Wyświetlenie zaktualizowanych logów
    }

    // Metoda do wyświetlania logów w elemencie HTML
    displayLogs() {
        const logContainer = document.getElementById('log-container');  // Pobranie kontenera logów
        logContainer.innerHTML = '';  // Wyczyszczenie zawartości kontenera

        // Iteracja po logach i dodawanie ich do kontenera
        this.logs.forEach(log => {
            const logElement = document.createElement('p');  // Tworzenie elementu &lt;p&gt; dla każdego loga
            logElement.textContent = log;  // Ustawienie treści loga
            logContainer.appendChild(logElement);  // Dodanie elementu do kontenera
        });
    }
}

// Tworzenie instancji loggera (Singleton)
const logger = new Logger();

// Obsługa przycisku dodającego nowy log
document.getElementById('logBtn').addEventListener('click', () => {
    logger.addLog('Nowy log został dodany.');  // Dodanie nowego loga
});

        &lt;/script&gt;
        </code></pre>
    </div>

    <script>
        // Wzorzec Singleton dla Loggera
        class Logger {
            constructor() {
                if (Logger.instance) {
                    return Logger.instance; // Zwracamy istniejącą instancję, jeśli została już utworzona
                }
                this.logs = []; // Lista logów
                Logger.instance = this; // Zapisujemy instancję
            }

            // Dodaje nowy log
            addLog(message) {
                const timestamp = new Date().toLocaleTimeString();
                this.logs.push(`[${timestamp}] ${message}`);
                this.displayLogs(); // Wyświetla logi na stronie
            }

            // Wyświetla wszystkie logi na stronie
            displayLogs() {
                const logContainer = document.getElementById('log-container');
                logContainer.innerHTML = ''; // Czyszczenie kontenera
                this.logs.forEach(log => {
                    const logElement = document.createElement('p');
                    logElement.textContent = log; // Tworzenie elementu dla każdego logu
                    logContainer.appendChild(logElement);
                });
            }
        }

        // Inicjalizacja Singletona
        const logger = new Logger();

        // Obsługa przycisku "Dodaj log"
        document.getElementById('logBtn').addEventListener('click', () => {
            logger.addLog('Nowy log został dodany.'); // Dodanie nowego logu do Loggera
        });
    </script>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.23.0/prism.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.23.0/components/prism-javascript.min.js"></script>
</body>
</html>
